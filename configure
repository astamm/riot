#! /bin/sh

RSCRIPT_BIN=${R_HOME}/bin/Rscript
NCORES=`${RSCRIPT_BIN} -e "cat(min(2, parallel::detectCores(logical = FALSE)))"`

cd src

#### CMAKE CONFIGURATION ####
. ./scripts/cmake_config.sh

sh ./scripts/vtk_download.sh ${RSCRIPT_BIN}
dot() { file=$1; shift; . "$file"; }
dot ./scripts/r_config.sh ""
sh ./scripts/vtk_build.sh "${CMAKE_BIN}"
sh ./scripts/vtk_install.sh "${CMAKE_BIN}" ${NCORES} ""
sh ./scripts/vtk_cleanup.sh
